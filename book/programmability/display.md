# オブジェクトディスプレイ

Sui上のオブジェクトは、その構造と動作が明確で、理解しやすい方法で表示できます。
ただし、クライアントにより豊富なメタデータをサポートするために、
クライアントにそれらを「記述」する標準的で効率的な方法があります
- [Sui Framework](./sui-framework)で定義された`Display`オブジェクトです。

## 背景

歴史的に、オブジェクトをユーザーインターフェースで表示できるようにするための
標準構造について合意するための様々な試みがありました。アプローチの一つは、
オブジェクト構造体に特定のフィールドを定義し、それらが存在する場合に
UIで使用することでした。このアプローチは十分に柔軟ではなく、
開発者はすべてのオブジェクトで同じフィールドを定義する必要があり、
時にはフィールドがオブジェクトにとって意味をなさない場合もありました。

```move file=packages/samples/sources/programmability/display.move anchor=background

```

フィールドのいずれかが静的データを含んでいた場合、それはすべてのオブジェクトで
重複していました。そして、Moveにはインターフェースがないため、
オブジェクトの型を「手動で」チェックすることなく、オブジェクトが特定のフィールドを
持っているかどうかを知ることはできません。これにより、クライアントの取得がより複雑になります。

## オブジェクトディスプレイ

これらの問題に対処するために、Suiは表示用のオブジェクトを記述する標準的な方法を
導入しました。オブジェクト構造体にフィールドを定義する代わりに、
表示メタデータは別のオブジェクトに格納され、それが型に関連付けられます。
このようにして、表示メタデータは重複せず、拡張とメンテナンスが容易になります。

Sui Displayのもう一つの重要な機能は、テンプレートを定義し、それらのテンプレートで
オブジェクトフィールドを使用する機能です。これにより、より柔軟な表示が可能になるだけでなく、
開発者はすべてのオブジェクトで同じ名前と型の同じフィールドを定義する必要がなくなります。

> オブジェクトディスプレイは[Sui Full Node](https://docs.sui.io/guides/operator/sui-full-node)によって
> ネイティブにサポートされており、オブジェクト型に関連付けられたDisplayがある場合、
> クライアントは任意のオブジェクトの表示メタデータを取得できます。

```move file=packages/samples/sources/programmability/display.move anchor=hero

```

## 作成者特権

オブジェクトはアカウントによって所有され、[真の所有権](./../object/ownership#account-owner-or-single-owner)の
対象となる場合がありますが、Displayはオブジェクトの作成者によって所有されることができます。
このようにして、作成者は表示メタデータを更新し、すべてのオブジェクトを更新する必要なしに
変更をグローバルに適用できます。作成者はDisplayを別のアカウントに転送したり、
メタデータを管理するカスタム機能を持つオブジェクト周辺のアプリケーションを
構築することもできます。

## 標準フィールド

最も広くサポートされているフィールドは以下の通りです：

- `name` - オブジェクトの名前。ユーザーがオブジェクトを表示する際に表示されます。
- `description` - オブジェクトの説明。ユーザーがオブジェクトを表示する際に表示されます。
- `link` - アプリケーションで使用するオブジェクトへのリンク。
- `image_url` - オブジェクトの画像のURLまたはblob。
- `thumbnail_url` - ウォレット、エクスプローラー、その他の製品でプレビューとして使用する
  より小さな画像のURL。
- `project_url` - オブジェクトまたは作成者に関連するウェブサイトへのリンク。
- `creator` - オブジェクト作成者を示す文字列。

> サポートされているフィールドの最新のリストについては、
> [Sui Documentation](https://docs.sui.io/standards/display)を参照してください。

標準的なフィールドセットがありますが、Displayオブジェクトはそれらを強制しません。
開発者は必要な任意のフィールドを定義でき、クライアントはそれらを適切に使用できます。
一部のアプリケーションでは追加のフィールドが必要で、他のフィールドを省略する場合があり、
Displayはそれらをサポートするのに十分柔軟です。

## Displayの操作

`Display`オブジェクトは`sui::display`モジュールで定義されています。これは
ファントム型をパラメータとして取るジェネリック構造体です。ファントム型は
`Display`オブジェクトをそれが記述する型に関連付けるために使用されます。
`Display`オブジェクトの`fields`は、キーがフィールド名で値がフィールド値である
キーと値のペアの`VecMap`です。`version`フィールドは表示メタデータのバージョン管理に使用され、
`update_display`呼び出し時に更新されます。

```move
module sui::display;

public struct Display<phantom T: key> has key, store {
    id: UID,
    /// 表示用のフィールドを含む。現在サポートされている
    /// フィールドは：name、link、image、description。
    fields: VecMap<String, String>,
    /// Publisherによって手動でのみ更新できるバージョン。
    version: u16
}
```

[Publisher](./publisher)オブジェクトは新しいDisplayに必要です。これは型の所有権の
証明として機能するためです。

## テンプレート構文

現在、Displayは単純な文字列補間をサポートし、テンプレートで構造体フィールド（およびパス）を
使用できます。構文は簡単です - `{path}`はパスのフィールドの値に置き換えられます。
パスは、ネストされたフィールドの場合はルートオブジェクトから始まる、
ドットで区切られたフィールド名のリストです。

```move file=packages/samples/sources/programmability/display.move anchor=nested

```

上記の`LittlePony`型のDisplayは以下のように定義できます：

```json
{
  "name": "Just a pony",
  "image_url": "{image_url}",
  "description": "{metadata.description}"
}
```

## 複数のDisplayオブジェクト

特定の`T`に対して作成できる`Display<T>`オブジェクトの数に制限はありません。ただし、
最も最近更新された`Display<T>`がフルノードによって使用されます。

## さらなる読み物

- [Sui Object Display](https://docs.sui.io/standards/display) - Sui Documentation
- [Publisher](./publisher) - 作成者の表現
