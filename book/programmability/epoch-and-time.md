# エポックと時間

Suiには現在の時間にアクセスする2つの方法があります：`Epoch`と`Time`です。前者は
システムの運用期間を表し、約24時間ごとに変更されます。後者は、Unixエポックからの
現在の時間をミリ秒で表します。両方ともプログラム内で自由にアクセスできます。

## エポック

エポックは、システムを運用期間に分離するために使用されます。エポック中はバリデーターセットが
固定されますが、エポック境界では、バリデーターセットを変更できます。エポックは
コンセンサスアルゴリズムで重要な役割を果たし、現在のバリデーターセットを決定するために
使用されます。また、ステーキングメカニズムでの測定にも使用されます。

エポックは[トランザクションコンテキスト](./transaction-context)から読み取ることができます：

```move file=packages/samples/sources/programmability/epoch-and-time.move anchor=epoch

```

エポック開始のUnixタイムスタンプを取得することも可能です：

```move file=packages/samples/sources/programmability/epoch-and-time.move anchor=epoch_start

```

通常、エポックはステーキングとシステム操作で使用されますが、カスタムシナリオでは
24時間期間をエミュレートするために使用できます。アプリケーションがステーキングロジックに
依存している場合や、現在のバリデーターセットを知る必要がある場合は重要です。

## 時間

より正確な時間測定のために、Suiは`Clock`オブジェクトを提供します。これは、システムによって
チェックポイント中に更新されるシステムオブジェクトで、Unixエポックからの現在の時間を
ミリ秒で格納します。`Clock`オブジェクトは`sui::clock`モジュールで定義され、
予約済みアドレス`0x6`を持ちます。

Clockは共有オブジェクトですが、可変でアクセスしようとするトランザクションは失敗します。
この制限により、`Clock`オブジェクトへの並列アクセスが可能になり、パフォーマンスの維持に
重要です。

```move
module sui::clock;

/// Move呼び出しに時間を公開するシングルトン共有オブジェクト。この
/// オブジェクトはアドレス0x6にあり、エントリ関数によってのみ読み取り可能
/// （不変参照を介してアクセス）です。
///
/// 可変参照または値で`Clock`を受け入れようとするエントリ関数は
/// 検証に失敗し、正直なバリデーターは不変参照として渡されない限り、
/// `Clock`を入力パラメータとして使用するトランザクションに署名または
/// 実行しません。
public struct Clock has key {
    id: UID,
    /// クロックのタイムスタンプ。これは、コンセンサスがスケジュールを
    /// コミットするたびにシステムトランザクションによって自動的に設定されるか、
    /// テスト中は`sui::clock::increment_for_testing`によって設定されます。
    timestamp_ms: u64,
}
```

`Clock`モジュールで利用可能なパブリック関数は1つだけです - `timestamp_ms`です。
これは、Unixエポックからの現在の時間をミリ秒で返します。

```move file=packages/samples/sources/programmability/epoch-and-time.move anchor=clock

```

## テスト

`Clock`モジュールは、テストで使用するための多くのメソッドを提供します。

```move file=packages/samples/sources/programmability/epoch-and-time.move anchor=test

```